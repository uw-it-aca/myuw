{% load templatetag_handlebars %}
    {% tplhandlebars "photo_class_list" %}

<div class="container">

        <div id="photoclasslist_popup">

            <div class="myuw-card myuw-photo-list" data-name="PhotoClasslistPopupCard" data-type="card">
                {{ #if available_sections }}
                <div style="float:right;"><select id="available_sections">{{ #each available_sections }}<option value="{{ section_id }}">{{ name }}</option>{{ /each }}</select></div>
                {{ /if }}
                <h3 class="scheduleHeading myuw-card-title">{{ toTitleCase quarter }} {{ year }} | {{ sections.0.curriculum_abbr }} {{ sections.0.course_number }} {{ sections.0.section_id }} | SLN {{ sections.0.sln }}</h3>

                <div id="classlist_controls" class="row myuw-photo-list-controls" style="padding-bottom: 16px;">
                    <div class="col-sm-7">
                        <div class="myuw-photo-list-controls-view">
                            View:&nbsp;&nbsp;<a id="list_view" href="#"><i class="fa fa-list" aria-hidden="true"></i> Detailed</a> | <a id="grid_view" href="#"><i class="fa fa-th" aria-hidden="true"></i> Simple</a>
                        </div>
                        <div class="myuw-photo-list-controls-sort">
                            Sort by:&nbsp;&nbsp;<select id="sort_list">
                                <option value="name,surname">First Name</option>
                                <option value="surname,name" selected="selected">Last Name</option>
                                <option value="netid">UW NetID</option>
                                <option value="class_code,surname,name">Class</option>
                                <option value="credits,surname,name">Credits</option>
                                {{ #each sections.0.linked_types }}
                                <option value="linked_type_{{ this }},surname,name">{{ ucfirst this }} Section</option>
                                {{ /each }}
                            </select>
                        </div>
                    </div>
                    <div class="col-sm-5">
                        <div class="myuw-photo-list-controls-actions">
                            <a href="#" id="download_class_list"><i class="fa fa-download"></i>&nbsp;Download class list (Excel)</a> | <a href="javascript:window.print()" class="classlist-print"><i class="fa fa-print"></i>&nbsp;Print</a>
                        </div>
                    </div>
                </div>

                {{#if sections.0.current_or_future}}
                    {{#if sections.0.current_student_majors}}
                        <div style="margin-bottom: 16px;">
                            <strong>Course Stats:</strong> {{sections.0.current_student_majors.0.percent_students}}% {{ toTitleCase sections.0.current_student_majors.0.major }} majors. <a href="#" rel="{{year}}_{{quarter}}_{{ sections.0.curriculum_abbr }}_{{ sections.0.course_number }}_{{ sections.0.section_id }}">View more in course stats</a>
                        </div>
                    {{/if}}
                {{/if}}

                <div id="student_list">

                    <ol id="student_sort">

                        {{ #each sections.0.registrations }}
                            <li id="student_{{ regid }}">

                                <img class="classlist-photo myuw-photo-list-image" src="/photo/{{ url_key }}">

                                <div class="myuw-photo-list-content">
                                    <div>
                                        <strong>{{ surname }}, {{ name }}</strong><br />
                                        <span class="sr-only">Email:&nbsp;&nbsp;</span><a href="mailto:{{ email }}">{{ email }}</a>
                                    </div>
                                    <div class="myuw-photo-list-meta">
                                        <div class="pull-left" style="width:50%; min-width: 272px;">
                                        Student Number:&nbsp;&nbsp;{{ student_number }} <br />
                                        UW NetID:&nbsp;&nbsp;{{ netid }} <br />
                                        Major:&nbsp;&nbsp;{{ #each majors }}{{ full_name }}{{#unless @last}},&nbsp;{{/unless}}{{ /each }}<br />
                                        Class:&nbsp;&nbsp;{{ class }}
                                        </div>
                                        <div class="pull-left" style="width:50%; min-width: 272px;">
                                        Credits:&nbsp;&nbsp;{{ credits }} <br />
                                        {{ #if linked_sections }}
                                        {{ #each linked_sections }}
                                            {{ ucfirst type }} Section:&nbsp;&nbsp;
                                            {{ #each sections }}
                                                {{ this }}
                                            {{ /each }}
                                            <br />
                                        {{ /each }}
                                        {{ /if }}
                                        </div>
                                    </div>
                                </div>

                            </li>
                        {{ /each }}

                    </ol>
                </div>

            </div>
        </div>

</div>
    {% endtplhandlebars %}
